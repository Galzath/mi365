:root {
    /* --- Dark Mode Colors (Default) --- */
    --color-bg-main-dark: #0A192F; /* Very dark navy blue, almost black */
    --color-bg-surface-dark: #172A45; /* Dark slate blue for panels, cards */
    --color-bg-header-dark: #0A192F; /* Same as main background */
    --color-bg-input-dark: #0A192F;

    --color-text-primary-dark: #E0E6F1; /* Light grayish blue, off-white */
    --color-text-primary-rgb-dark: 224, 230, 241; 
    --color-text-secondary-dark: #A8B2D1; /* Slightly darker grayish blue */
    --color-text-on-accent-dark: #FFFFFF; /* Pure white for text on primary blue buttons */
    --color-text-on-warning-dark: #212529; /* Dark text for warning toast */


    --color-border-dark: #303C55; /* Subtle blueish border */
    --color-border-input-dark: #4A5C7A;

    --color-accent-primary-dark: #0D6EFD; /* Corporate Blue */
    --color-accent-primary-rgb-dark: 13, 110, 253; 
    --color-accent-primary-hover-dark: #0B5ED7; /* Darker Corporate Blue */
    --color-accent-secondary-dark: #6C757D; /* Corporate Gray for secondary actions */
    --color-accent-secondary-hover-dark: #5A6268; /* Darker Corporate Gray */

    --color-success-dark: #198754; /* Bootstrap Green */
    --color-success-rgb-dark: 25, 135, 84;
    --color-warning-dark: #FFC107; /* Bootstrap Yellow */
    --color-warning-rgb-dark: 255, 193, 7;
    --color-danger-dark: #DC3545; /* Bootstrap Red */
    --color-danger-rgb-dark: 220, 53, 69;
    --color-info-dark: #0DCAF0; /* Bootstrap Cyan */
    --color-info-rgb-dark: 13, 202, 240;

    /* Generic variables using dark versions by default */
    --color-bg-main: var(--color-bg-main-dark);
    --color-bg-surface: var(--color-bg-surface-dark);
    --color-bg-header: var(--color-bg-header-dark);
    --color-bg-input: var(--color-bg-input-dark);
    --color-text-primary: var(--color-text-primary-dark);
    --color-text-primary-rgb: var(--color-text-primary-rgb-dark);
    --color-text-secondary: var(--color-text-secondary-dark);
    --color-text-on-accent: var(--color-text-on-accent-dark);
    --color-text-on-warning: var(--color-text-on-warning-dark);
    --color-border: var(--color-border-dark);
    --color-border-input: var(--color-border-input-dark);
    --color-accent-primary: var(--color-accent-primary-dark);
    --color-accent-primary-rgb: var(--color-accent-primary-rgb-dark);
    --color-accent-primary-hover: var(--color-accent-primary-hover-dark);
    --color-accent-secondary: var(--color-accent-secondary-dark);
    --color-accent-secondary-hover: var(--color-accent-secondary-hover-dark);
    --color-success: var(--color-success-dark);
    --color-success-rgb: var(--color-success-rgb-dark);
    --color-warning: var(--color-warning-dark);
    --color-warning-rgb: var(--color-warning-rgb-dark);
    --color-danger: var(--color-danger-dark);
    --color-danger-rgb: var(--color-danger-rgb-dark);
    --color-info: var(--color-info-dark);
    --color-info-rgb: var(--color-info-rgb-dark);
    --color-border-input-focus: var(--color-accent-primary);
}

body.light-mode {
    /* --- Light Mode Colors --- */
    --color-bg-main-light: #FFFFFF;
    --color-bg-surface-light: #F8F9FA; 
    --color-bg-header-light: #FFFFFF;
    --color-bg-input-light: #FFFFFF;

    --color-text-primary-light: #212529; 
    --color-text-primary-rgb-light: 33, 37, 41; 
    --color-text-secondary-light: #6C757D; 
    --color-text-on-accent-light: #FFFFFF; 
    --color-text-on-warning-light: #212529; /* Dark text for warning toast */


    --color-border-light: #DEE2E6; 
    --color-border-input-light: #CED4DA;

    /* Generic variables redefined for light mode */
    --color-bg-main: var(--color-bg-main-light);
    --color-bg-surface: var(--color-bg-surface-light);
    --color-bg-header: var(--color-bg-header-light);
    --color-bg-input: var(--color-bg-input-light);
    --color-text-primary: var(--color-text-primary-light);
    --color-text-primary-rgb: var(--color-text-primary-rgb-light);
    --color-text-secondary: var(--color-text-secondary-light);
    --color-text-on-accent: var(--color-text-on-accent-light);
    --color-text-on-warning: var(--color-text-on-warning-light);
    --color-border: var(--color-border-light);
    --color-border-input: var(--color-border-input-light);
}

body {
    font-family: 'Inter', sans-serif;
    margin: 0;
    padding: 0;
    background-color: var(--color-bg-main);
    color: var(--color-text-primary);
    line-height: 1.5;
}

/* باقی CSS بدون تغییر باقی می ماند */
/* ... (rest of CSS remains unchanged from previous correct version) ... */

/* Cabecera Principal */
nav.shadow-sm {
    background-color: var(--color-bg-header) !important;
    border-bottom: 1px solid var(--color-border);
}

/* Logo en la cabecera */
.logo-mi365-header .logo-mi {
    color: var(--color-text-primary); 
    font-weight: 800;
}
.logo-mi365-header .logo-365-number {
    color: var(--color-accent-primary); 
    background-color: transparent;
    padding: 2px 4px;
    margin-left: 1px;
    font-size: 0.9em;
    font-weight: 800;
}
/* Logo en el login */
.logo-mi365-login .logo-mi {
    color: var(--color-text-primary);
    font-weight: 800;
}
.logo-mi365-login .logo-365-number {
    color: var(--color-accent-primary);
    background-color: transparent;
    padding: 2px 4px;
    margin-left: 1px;
    font-size: 0.9em;
    font-weight: 800;
}

/* Enlaces de navegación en la cabecera */
.main-header-link { 
    color: var(--color-text-secondary) !important; 
    opacity: 0.9;
    padding: 0.5rem 0.75rem; 
    border-radius: 0.375rem; 
    transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out, opacity 0.2s ease-in-out;
}
.main-header-link:hover {
    opacity: 1;
    color: var(--color-accent-primary) !important; 
    background-color: rgba(var(--color-accent-primary-rgb), 0.07) !important;
}
.main-header-link.active { 
    opacity: 1;
    font-weight: 600 !important;
    color: var(--color-accent-primary) !important; 
    background-color: rgba(var(--color-accent-primary-rgb), 0.15);
}

/* Menú de usuario en la cabecera */
#user-menu-text {
    color: var(--color-text-primary) !important;
}
#user-menu-button svg {
    color: var(--color-text-secondary) !important;
}
#logout-dropdown { 
    background-color: var(--color-bg-surface) !important; 
    border: 1px solid var(--color-border) !important;
}
#logout-dropdown a {
    color: var(--color-text-primary) !important; 
}
#logout-dropdown a:hover {
    background-color: rgba(var(--color-accent-primary-rgb), 0.1) !important;
    color: var(--color-accent-primary) !important;
}
#logout-dropdown #logout-button { 
    color: var(--color-danger) !important;
}
#logout-dropdown #logout-button:hover {
    background-color: rgba(var(--color-danger-rgb), 0.1) !important;
}

.form-label {
    display: block;
    font-size: 0.75rem; 
    font-weight: 500; 
    margin-bottom: 0.25rem; 
    color: var(--color-text-secondary);
}

input[type="text"], input[type="email"], input[type="password"], input[type="number"], input[type="date"], select, textarea {
    background-color: var(--color-bg-input);
    border: 1px solid var(--color-border-input);
    color: var(--color-text-primary);
    border-radius: 0.375rem;
    padding: 0.625rem 0.75rem;
    font-size: 0.875rem;
}
input:focus, select:focus, textarea:focus {
    border-color: var(--color-accent-primary) !important; 
    box-shadow: 0 0 0 3px rgba(var(--color-accent-primary-rgb), 0.25);
    outline: none;
}
::placeholder { 
  color: var(--color-text-secondary);
  opacity: 0.7; 
}
:-ms-input-placeholder { 
  color: var(--color-text-secondary);
  opacity: 0.7;
}
::-ms-input-placeholder { 
  color: var(--color-text-secondary);
  opacity: 0.7;
}

/* Botones */
.btn-accent-primary {
    background-color: var(--color-accent-primary) !important;
    color: var(--color-text-on-accent) !important;
    font-weight: 600;
}
.btn-accent-primary:hover {
    background-color: var(--color-accent-primary-hover) !important;
}
.btn-outline-accent {
    background-color: transparent !important;
    border: 2px solid var(--color-accent-primary) !important;
    color: var(--color-accent-primary) !important;
    font-weight: 600;
}
.btn-outline-accent:hover {
    background-color: rgba(var(--color-accent-primary-rgb), 0.1) !important;
}

/* Panels and Cards */
.panel, .kpi-card {
    background-color: var(--color-bg-surface);
    border: 1px solid var(--color-border);
}
.kpi-card {
    border-radius: 0.5rem;
}
.panel {
     border-radius: 0.75rem;
}
.kpi-card .kpi-value {
    color: var(--color-accent-primary);
}

/* Tables */
.table-container {
    max-height: 200px; 
    overflow-y: auto;
}
.compact-table th {
    background-color: var(--color-bg-surface); 
    color: var(--color-text-secondary);
    text-transform: uppercase;
    font-weight: 600;
}
.compact-table th, .compact-table td {
     padding: 0.5rem 0.75rem; 
     font-size: 0.75rem; 
     border-bottom: 1px solid var(--color-border);
}
.compact-table tbody tr:last-child td {
    border-bottom: none;
}
.table-container::-webkit-scrollbar-thumb { 
    background-color: var(--color-text-secondary); 
    border-radius: 3px; 
}
.table-container::-webkit-scrollbar { width: 6px; }
.table-container::-webkit-scrollbar-track { background: transparent; }

/* Tailwind utility overrides / adjustments using generic variables */
.shadow-sm { box-shadow: 0 1px 2px 0 rgba(0,0,0,0.05); }
body.light-mode .shadow-sm, html[class="light-mode"] .shadow-sm { box-shadow: 0 1px 2px 0 rgba(0,0,0,0.06); }
html:not(.light-mode) .shadow-sm { box-shadow: 0 1px 2px 0 rgba(var(--color-text-primary-rgb),0.07); }


.shadow-md { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06); }
body.light-mode .shadow-md, html[class="light-mode"] .shadow-md { box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); }
html:not(.light-mode) .shadow-md { box-shadow: 0 4px 6px -1px rgba(var(--color-text-primary-rgb),0.08), 0 2px 4px -1px rgba(var(--color-text-primary-rgb),0.05); }


.text-indigo-600 { color: var(--color-accent-primary) !important; } 
.hover\:bg-gray-200:hover { background-color: rgba(var(--color-text-primary-rgb), 0.07); } 
.focus\:ring-indigo-500:focus { 
    border-color: var(--color-accent-primary) !important;
    box-shadow: 0 0 0 3px rgba(var(--color-accent-primary-rgb), 0.25) !important;
}
.bg-indigo-600 { background-color: var(--color-accent-primary) !important; }
.hover\:bg-indigo-700:hover { background-color: var(--color-accent-primary-hover) !important; }
.focus\:ring-offset-2:focus { ring-offset-color: var(--color-bg-surface) !important; }

/* Toast Notification System */
.toast-message {
    padding: 0.75rem 1rem; 
    border-radius: 0.375rem; 
    /* color: var(--color-text-on-accent); Default, overridden by specific types if needed */
    font-size: 0.875rem; 
    font-weight: 500;
    box-shadow: 0 4px 6px -1px rgba(var(--color-text-primary-rgb),0.08), 0 2px 4px -1px rgba(var(--color-text-primary-rgb),0.05);
    opacity: 0.95;
    transition: opacity 0.5s ease-out, transform 0.5s ease-out;
    margin-bottom: 0.5rem; 
}
body.light-mode .toast-message {
     box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -2px rgba(0,0,0,0.1); 
}

.toast-message.fade-out { 
    opacity: 0;
    transform: scale(0.95);
}
.toast-success { 
    background-color: var(--color-success); 
    color: var(--color-text-on-accent); /* Ensure contrast */
}
.toast-error { 
    background-color: var(--color-danger); 
    color: var(--color-text-on-accent); /* Ensure contrast */
}
.toast-info { 
    background-color: var(--color-info); 
    color: var(--color-text-on-accent); /* Ensure contrast */
}
.toast-warning { 
    background-color: var(--color-warning); 
    color: var(--color-text-on-warning); /* Use specific text color for warning */
}

/* Specific Light mode shadow adjustments if needed for other elements */
body.light-mode .panel, body.light-mode .kpi-card {
    /* box-shadow: 0 1px 3px 0 rgba(0,0,0,0.1), 0 1px 2px -1px rgba(0,0,0,0.1); */
}
